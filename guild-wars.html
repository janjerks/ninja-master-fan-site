<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guild Wars History â€“ Ninja Master Fan Site</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="nav-placeholder"></div>

<main class="section" style="padding-top: 140px;">
  <div style="text-align: center; margin-bottom: 2rem;">
    <h1>Guild Wars History</h1>
    <p>View complete rankings, champions, and rewards from all seasons.</p>
  </div>

  <div style="text-align: center; margin: 2.5rem 0;">
    <select id="seasonSelect" style="min-width: 340px; font-size: 1.2rem; padding: 1rem 1.6rem;">
      <option value="">Choose a Season</option>
      <option value="1">Season 1</option>
      <option value="2">Season 2</option>
      <option value="3">Season 3</option>
      <option value="4">Season 4</option>
      <option value="5">Season 5</option>
      <option value="6">Season 6</option>
      <option value="7">Season 7</option>
      <option value="8">Season 8</option>
      <option value="9">Season 9</option>
      <option value="10">Season 10</option>
      <option value="11">Season 11</option>
      <option value="12">Season 12</option>
      <option value="13">Season 13</option>
    </select>
  </div>

  <div id="seasonContent" class="season-loaded-content">
    <p style="text-align: center; padding: 4rem 1rem; font-size: 1.3rem; opacity: 0.8;">
      Select a season to view detailed rankings and rewards.
    </p>
  </div>
</main>

<div id="footer-placeholder"></div>

<script>
document.addEventListener('DOMContentLoaded', async () => {
  try {
    const navResponse = await fetch('nav.html');
    document.getElementById('nav-placeholder').innerHTML = await navResponse.text();

    const footerResponse = await fetch('footer.html');
    document.getElementById('footer-placeholder').innerHTML = await footerResponse.text();

    const currentFile = window.location.pathname.split('/').pop() || 'index.html';
    document.querySelectorAll('.nav-link').forEach(link => {
      const href = link.getAttribute('href');
      if (href.startsWith('http') || href.startsWith('//')) return;
      const targetFile = href.split('/').pop() || 'index.html';
      if (currentFile === targetFile) {
        link.classList.add('active');
      }
    });
  } catch (err) {
    console.error('Error loading shared components:', err);
  }

  // Season loading logic
  const seasonSelect = document.getElementById('seasonSelect');
  const seasonContent = document.getElementById('seasonContent');

  seasonSelect.addEventListener('change', async (e) => {
    const season = e.target.value;
    if (!season) {
      seasonContent.innerHTML = '<p style="text-align:center; padding:4rem 1rem; font-size:1.3rem; opacity:0.8;">Select a season to view detailed rankings and rewards.</p>';
      return;
    }

    seasonContent.innerHTML = '<p style="text-align:center; padding:4rem 1rem;">Loading Season ' + season + '...</p>';

    try {
      const timestamp = new Date().getTime();
      const response = await fetch(`seasons/season${season}.html?t=${timestamp}`);
      if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
      const html = await response.text();
      seasonContent.innerHTML = html;
    } catch (err) {
      console.error('Season load error:', err);
      seasonContent.innerHTML = '<p style="color:#ff4500; text-align:center; padding:4rem 1rem;">Error loading season. Please try again later.</p>';
    }
  });
});
</script>

</body>
</html>